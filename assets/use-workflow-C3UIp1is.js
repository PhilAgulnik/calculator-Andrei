import{r as n,u as C,b as N,j as h}from"./index-DpxrsPB5.js";const P=n.createContext({currentPage:null,nextPage:null,previousPage:null,progressPercentage:0,visiblePages:[],basePath:null,goToNextPage:()=>{},entry:null,entries:[],addEntry:()=>{},removeEntry:()=>{},updateEntryData:()=>{}});let W=e=>crypto.getRandomValues(new Uint8Array(e)),b=(e,i,a)=>{let u=(2<<Math.log2(e.length-1))-1,c=-~(1.6*u*i/e.length);return(g=i)=>{let d="";for(;;){let r=a(c),l=c|0;for(;l--;)if(d+=e[r[l]&u]||"",d.length>=g)return d}}},j=(e,i=21)=>b(e,i|0,W);const D=j("0123456789abcdefghijklmnopqrstuvwxyz",16);function O({basePath:e}){const i=n.useMemo(()=>localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)||"{}"):[],[e]),[a,u]=n.useState(i),c=n.useCallback(()=>{const r={id:D(),data:{},createdAt:new Date().toISOString()},l={...a,[r.id]:r};return localStorage.setItem(e,JSON.stringify(l)),r},[e,a]),g=n.useCallback(r=>{u(l=>{const s={...l};return delete s[r],localStorage.setItem(e,JSON.stringify(s)),s})},[e,a]),d=n.useCallback((r,l)=>{u(s=>{const t={...s};return t[r]&&(t[r]={...t[r],data:{...t[r].data,...l}},localStorage.setItem(e,JSON.stringify(t))),t})},[e,a]);return{entries:a,addEntry:c,removeEntry:g,updateEntryData:d}}function J(e){const{children:i,pages:a,basePath:u}=e,c=C(),[g,d]=n.useState(a),r=N({strict:!1}),l=r?.id||"",s=r?.slug||"",t=n.useMemo(()=>g.filter(o=>o.isVisible),[g]),x=n.useMemo(()=>t.length,[t]),p=n.useMemo(()=>t.find(o=>o.slug===s)??null,[t,s]),m=n.useMemo(()=>{const o=t.findIndex(f=>f.slug===s);return o<0?null:t[o+1]??null},[t,s]),y=n.useMemo(()=>{const o=t.findIndex(f=>f.slug===s);return o<0?null:t[o-1]??null},[t,s]),E=n.useMemo(()=>{const o=t.findIndex(f=>f.slug===s);return o<0?0:Math.round((o+1)/x*100)},[x,s]),w=n.useCallback(()=>{m&&(c({to:`${u}/$id`,params:{id:l,slug:m.slug}}),c({to:`${u}/$id/$slug`,params:{id:l,slug:m.slug}}))},[u,m]),{entries:v,addEntry:S,removeEntry:k,updateEntryData:I}=O({basePath:u}),M=n.useMemo(()=>({currentPage:p,nextPage:m,previousPage:y,progressPercentage:E,visiblePages:t,basePath:u,goToNextPage:w,entry:v[l]||null,entries:v,addEntry:S,removeEntry:k,updateEntryData:o=>I(l,o)}),[p,m,y,E,t,w]);return h.jsx(P.Provider,{value:M,children:i})}const A=()=>{const e=n.useContext(P);if(!e)throw new Error("useWorkflow must be used within a WorkflowProvider");return e};export{J as W,A as a,O as u};
